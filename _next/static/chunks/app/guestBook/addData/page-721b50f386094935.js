(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{3082:function(e,a,t){Promise.resolve().then(t.bind(t,5505))},5505:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return u}});var i=t(7437),s=t(2598),l=t(5788),n=t(2704),r=t(7648),o=t(9376),d=t(2265);function u(){let e=(0,o.useRouter)(),[a,t]=(0,d.useState)({}),[u,c]=(0,d.useState)([{id:"",nama:""}]),[m,h]=(0,d.useState)([]);(0,d.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([fetch("".concat("https://silat.barengsaya.com/api","/institusi-tamu")),fetch("".concat("https://silat.barengsaya.com/api","/divisi"))]);if(e.ok){let a=await e.json();Object.keys(a.data).length>0&&c(a.data.data)}if(a.ok){let e=await a.json();Object.keys(e.data).length>0&&h(e.data.data)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let f=(e,a)=>{var i,s;if("institusi_tamu_id"===e){let s=(null===(i=u.find(e=>e.nama===a))||void 0===i?void 0:i.id)||null;s&&t(a=>({...a,[e]:s}))}else if("divisi_id"===e){let i=(null===(s=m.find(e=>e.nama===a))||void 0===s?void 0:s.id)||null;i&&t(a=>({...a,[e]:i}))}else t(t=>({...t,[e]:a}))},x=async()=>{let t=new FormData;Object.keys(a).forEach(e=>t.append(e,a[e]));try{let a=await fetch("".concat("https://silat.barengsaya.com/api","/buku-tamu"),{method:"POST",headers:{Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL3NpbGF0LmJhcmVuZ3NheWEuY29tL2FwaS9sb2dpbiIsImlhdCI6MTczMzE5OTUzNywiZXhwIjoxNzMzMjAzMTM3LCJuYmYiOjE3MzMxOTk1MzcsImp0aSI6ImhKckU0b3lzYzl6dHlwbDYiLCJzdWIiOiIyIiwicHJ2IjoiMjNiZDVjODk0OWY2MDBhZGIzOWU3MDFjNDAwODcyZGI3YTU5NzZmNyJ9.N2MrCZi1_qDUmsoDlO3MUmtxVj_hd1v5AP6CbTqO74I")},body:t});a.ok?(alert("Data berhasil ditambahkan"),e.push("/guestBook")):console.error("Failed to submit data",await a.json())}catch(e){console.error("Error submitting data:",e)}};return(0,i.jsxs)(n.default,{children:[(0,i.jsx)(r.default,{href:"/users",className:"mb-6",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})})}),(0,i.jsx)(s.Z,{pageName:"Tambah Tamu"}),(0,i.jsxs)("div",{className:"flex flex-col gap-9 rounded-sm border border-stroke bg-white px-6.5 py-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,i.jsx)(l.Z,{title:"Nama Tamu",onValueChange:e=>f("nama_tamu",e)}),(0,i.jsx)(l.Z,{title:"Alamat",onValueChange:e=>f("alamat",e)}),(0,i.jsx)(l.Z,{title:"No Telepon",onValueChange:e=>f("no_telpon",e)}),(0,i.jsx)(l.Z,{title:"Keperluan",onValueChange:e=>f("keperluan",e)}),(0,i.jsx)(l.Z,{title:"Instansi Asal",autoCompleteData:u.map(e=>e.nama),onValueChange:e=>f("institusi_tamu_id",e),addItemPath:"/institution/addData"}),(0,i.jsx)(l.Z,{title:"Divisi Tujuan",autoCompleteData:m.map(e=>e.nama),onValueChange:e=>f("divisi_id",e)}),(0,i.jsx)(l.Z,{title:"Nama Instansi",autoCompleteData:m.map(e=>e.nama),onValueChange:e=>f("divisi_id",e)}),(0,i.jsx)(l.Z,{title:"Alamat Instansi",autoCompleteData:m.map(e=>e.nama),onValueChange:e=>f("divisi_id",e)}),(0,i.jsx)(l.Z,{title:"Kontak Instansi",autoCompleteData:m.map(e=>e.nama),onValueChange:e=>f("divisi_id",e)})]}),(0,i.jsx)("button",{onClick:x,className:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray hover:bg-opacity-90",children:"Tambahkan tamu"})]})]})}},2598:function(e,a,t){"use strict";var i=t(7437),s=t(7648);a.Z=e=>{let{pageName:a}=e;return(0,i.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,i.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:a}),(0,i.jsx)("nav",{children:(0,i.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,i.jsx)("li",{children:(0,i.jsx)(s.default,{className:"font-medium",href:"/",children:"Dashboard /"})}),(0,i.jsx)("li",{className:"font-medium text-primary",children:a})]})})]})}},5788:function(e,a,t){"use strict";var i=t(7437),s=t(9376),l=t(2265);a.Z=e=>{let{title:a,autoCompleteData:t,onValueChange:n,addItemPath:r,defaultValue:o="",name:d=""}=e,[u,c]=(0,l.useState)(o),[m,h]=(0,l.useState)([]),[f,x]=(0,l.useState)(!1),b=(0,s.useRouter)();(0,l.useEffect)(()=>n(u),[u]);let p=e=>{x(!1),c(e)};return(0,l.useEffect)(()=>{h(t)},[t]),(0,i.jsxs)("div",{onBlur:()=>{setTimeout(()=>x(!1),500)},children:[(f||u)&&(0,i.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:a}),(0,i.jsx)("input",{type:"text",placeholder:a,value:u,onChange:e=>{e.target.value?x(!0):x(!1),c(e.target.value)},name:d,className:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent p-1.5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),(0,i.jsxs)("div",{className:"rounded-md bg-gray-100 w-full overflow-hidden px-4 py-2 mt-2 flex flex-col gap-y-4 text-left ".concat(f&&t?"":"hidden"),children:[null==m?void 0:m.filter(e=>!e||e.toLowerCase().includes(u.toLowerCase())).map((e,a)=>(0,i.jsx)("button",{onClick:()=>p(e),className:"hover:bg-blue-500 hover:text-white w-full text-left",children:e},a)),(0,i.jsx)("button",{onClick:()=>b.push(r),className:"hover:bg-blue-500 hover:text-white w-full",children:"+"})]})]})}}},function(e){e.O(0,[718,704,971,117,744],function(){return e(e.s=3082)}),_N_E=e.O()}]);